CREATE TABLE IF NOT EXISTS owners
(
    id    BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name  TEXT NOT NULL,
    email TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS dogs
(
    id        BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name      TEXT    NOT NULL,
    birth_day DATE    NOT NULL,
    breed     TEXT    NOT NULL,
    color     TEXT    NOT NULL,
    gender    TEXT    NOT NULL,
    weight    INTEGER NOT NULL,
    reg_time  TIMESTAMP WITHOUT TIME ZONE NOT NULL
);

CREATE TABLE IF NOT EXISTS dog_details
(
    id             BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    dog_id         BIGINT NOT NULL,
    health_history TEXT NOT NULL,
    visit_date     DATE NOT NULL,
    FOREIGN KEY (dog_id) REFERENCES dogs (id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS dog_owners
(
    id          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    dog_id   BIGINT NOT NULL,
    owner_id BIGINT NOT NULL,
    FOREIGN KEY (dog_id) REFERENCES dogs (id) ON DELETE CASCADE,
    FOREIGN KEY (owner_id) REFERENCES owners (id) ON DELETE CASCADE
);